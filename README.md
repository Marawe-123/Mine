# SmartJobCollector - أداة جمع وتحليل وظائف ذكية

## نظرة عامة

SmartJobCollector هي أداة ويب متكاملة مصممة لجمع وتحليل عروض الوظائف من مصادر مختلفة (حالياً فيسبوك بشكل أساسي) والتفاعل مع الباحثين عن عمل بشكل مؤتمت. تتكون الأداة من واجهة خلفية (Backend) مبنية باستخدام Node.js و Express، وواجهة أمامية (Frontend) مبنية باستخدام React و Vite.

## الميزات الرئيسية (الحالية والمقترحة)

*   **جمع الوظائف:** البحث التلقائي عن منشورات الوظائف في مصادر محددة (حالياً Facebook Graph API).
*   **تحليل التعليقات:** تحديد التعليقات من الباحثين عن عمل وتصنيف مشاعرهم (باستخدام تحليل بسيط للكلمات المفتاحية).
*   **الردود الآلية (مقترح):** إنشاء ردود تلقائية بناءً على قوالب (الإرسال الفعلي يتطلب تكامل API إضافي وصلاحيات).
*   **الجدولة:** تشغيل المهام (جمع، تحليل) بشكل دوري.
*   **لوحة تحكم:** واجهة لإدارة الوظائف، التعليقات، المهام، الإعدادات، وعرض الإحصائيات.

## التقنيات المستخدمة

*   **الخلفية:** Node.js, Express, TypeScript, Drizzle ORM, NeonDB (PostgreSQL Serverless)
*   **الأمامية:** React, Vite, TypeScript, Tailwind CSS, shadcn/ui, Tanstack Query
*   **الجدولة:** node-cron
*   **التسجيل:** Winston
*   **واجهات API:** Facebook Graph API

## الإعداد والتشغيل

### المتطلبات الأساسية

*   Node.js (الإصدار 20 أو أحدث موصى به)
*   npm أو yarn أو pnpm (مدير الحزم)
*   حساب في NeonDB (للحصول على رابط اتصال قاعدة بيانات PostgreSQL مجانية)
*   تطبيق فيسبوك (للحصول على App ID و App Secret لواجهة Graph API)

### خطوات الإعداد

1.  **استنساخ المستودع (أو فك ضغط الملفات):**
    ```bash
    # إذا كان لديك مستودع git
    # git clone <repository_url>
    # cd SmartJobCollector

    # أو إذا كان لديك الملف المضغوط
    # unzip SmartJobCollector.zip
    # cd SmartJobCollector
    ```

2.  **تثبيت الاعتماديات:**
    قم بتثبيت الاعتماديات لكل من الواجهة الخلفية والأمامية.
    ```bash
    npm install
    # أو
    # yarn install
    # أو
    # pnpm install
    ```
    *ملاحظة:* ملف `package.json` الحالي في الجذر يدير كلاً من السيرفر والعميل كـ monorepo، لذا يكفي تشغيل أمر التثبيت مرة واحدة في المجلد الجذر `SmartJobCollector`.

3.  **إعداد متغيرات البيئة:**
    قم بإنشاء ملف `.env` في المجلد الجذر للمشروع (`SmartJobCollector`) وأضف المتغيرات التالية مع قيمها الصحيحة:

    ```dotenv
    # رابط الاتصال بقاعدة بيانات NeonDB PostgreSQL
    DATABASE_URL="postgres://user:password@host:port/dbname?sslmode=require"

    # مفتاح سري لجلسات Express (اختر قيمة عشوائية آمنة)
    SESSION_SECRET="your_strong_random_session_secret"

    # بيانات تطبيق فيسبوك (من Facebook Developer Portal)
    FACEBOOK_APP_ID="your_facebook_app_id"
    FACEBOOK_APP_SECRET="your_facebook_app_secret"

    # (اختياري) إعدادات أخرى يمكن إضافتها لاحقاً
    # LOG_LEVEL="info"
    ```

4.  **تهيئة قاعدة البيانات:**
    قم بتشغيل أمر Drizzle Kit لدفع مخطط قاعدة البيانات إلى NeonDB.
    ```bash
    npx drizzle-kit push
    # أو
    # yarn drizzle-kit push
    # أو
    # pnpm drizzle-kit push
    ```

### تشغيل التطبيق (وضع التطوير)

يمكنك تشغيل الواجهة الخلفية والأمامية بشكل منفصل أو باستخدام الأمر المدمج:

```bash
# تشغيل الواجهة الخلفية والأمامية معاً (موصى به للتطوير)
npm run dev
# أو
# yarn dev
# أو
# pnpm dev
```

سيقوم هذا الأمر بتشغيل:
*   الخادم الخلفي (API) على المنفذ 5000 (أو المنفذ المحدد في الكود).
*   خادم تطوير الواجهة الأمامية (Vite) على منفذ مختلف (عادة 5173) مع وكيل (proxy) للطلبات إلى الواجهة الخلفية.

يمكنك الآن الوصول إلى الواجهة الأمامية عبر المتصفح على العنوان الذي يظهر في الطرفية (مثل `http://localhost:5173`).

### بناء التطبيق (وضع الإنتاج)

```bash
npm run build
# أو
# yarn build
# أو
# pnpm build
```

سيقوم هذا الأمر بـ:
*   بناء الواجهة الأمامية (React) ووضع الملفات الثابتة في مجلد `dist/client`.
*   بناء الواجهة الخلفية (Node.js) ووضع الملفات في مجلد `dist`.

### تشغيل التطبيق (وضع الإنتاج)

بعد البناء، يمكنك تشغيل التطبيق المنتج:

```bash
npm start
# أو
# yarn start
# أو
# pnpm start
```

سيقوم هذا بتشغيل خادم Node.js الذي يخدم كلاً من الواجهة الخلفية (API) وملفات الواجهة الأمامية الثابتة على المنفذ 5000.

## الاستضافة المجانية (مقترحات)

يمكن استضافة هذا التطبيق باستخدام مزيج من الخدمات المجانية:

1.  **قاعدة البيانات (PostgreSQL):**
    *   **NeonDB:** يوفر خطة مجانية جيدة تتوافق مع الإعداد الحالي.
2.  **الواجهة الخلفية (Node.js API):**
    *   **Render:** خطة مجانية لخدمات الويب (قد تدخل في وضع السكون).
    *   **Fly.io:** مستوى مجاني جيد يسمح بتشغيل مستمر (ضمن حدود).
    *   **Railway:** رصيد مجاني شهري.
3.  **الواجهة الأمامية (React Static Build):**
    *   **Vercel:** خطة مجانية ممتازة لاستضافة المواقع الثابتة.
    *   **Netlify:** بديل جيد لـ Vercel.

**الإعداد المقترح:**
*   استخدم NeonDB لقاعدة البيانات.
*   انشر الواجهة الخلفية (المجلد `dist` بعد البناء) على Render أو Fly.io (تأكد من إعداد متغيرات البيئة هناك).
*   انشر الواجهة الأمامية (المجلد `dist/client` بعد البناء) على Vercel أو Netlify. ستحتاج إلى تكوين إعدادات الوكيل (proxy) أو متغيرات البيئة في الواجهة الأمامية للإشارة إلى عنوان URL للواجهة الخلفية المنشورة.

## التعديلات المقترحة (للتنفيذ)

*   **جعل مصادر Facebook ديناميكية:** تعديل `server/services/jobScraper.ts` لقراءة معرفات المجموعات/الصفحات من جدول `Settings` بدلاً من القيم الثابتة.
*   **جعل كلمات تحليل التعليقات ديناميكية:** تعديل `server/services/commentAnalyzer.ts` لقراءة الكلمات المفتاحية من جدول `Settings`.
*   **إزالة الدوال الوهمية:** حذف أو تعديل الدوال `scrapeLinkedIn` و `scrapeIndeed` في `jobScraper.ts` لتعكس الواقع.
*   **(متقدم) تحسين تحليل التعليقات:** دمج مكتبة مثل `natural` في `commentAnalyzer.ts`.
*   **(متقدم جداً) تفعيل الرد الآلي:** ربط `autoReplyService` مع Facebook Graph API لإرسال التعليقات (يتطلب صلاحيات نشر).

## المساهمة

(يمكن إضافة تفاصيل حول كيفية المساهمة في المشروع إذا كان مفتوح المصدر).

## الترخيص

MIT (كما هو مذكور في `package.json`).

